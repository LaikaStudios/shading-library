##
##  Copyright(c) 2010 Laika, developed under contract by mitchpraterLLC.
##  All rights reserved unless otherwise granted. This program or documentation
##  contains proprietary, confidential information and trade secrets of Laika
##  and/or mitchpraterLLC. Use of copyright notice does not imply publication.
##  
##  By possessing this software, you agree to the following terms and conditions.
##  You may not resell this software, but you may freely distribute it to others.
##  You may use it for whatever purposes you wish. There are no warranties of any
##  kind. You may make modifications, however any derivation may only be distributed
##  to others under the same freedoms granted to you herein, it must retain this
##  notice and agreement, and the modifications noted. We also ask that you make
##  such modifications available to Laika, mitchpraterLLC, or to the computer
##  graphics community as a whole through a public forum.
##
slim 1 extensions mprater {
  extensions laika vfx {

	templateV float dV 0 {
        label {dV}
		description {
            Produces an output proportional to how rapidly the Input vector changes.
            Useful for detecting certain kinds of curvature in the geometry.
		}

		parameter vector Input {
			description {
                Use any vector quantity. Values that change over the surface
                are useful for determining how sharply the surface is bending.
			}
			provider variable
            detail mustvary "pixar,SurfaceNormal"
			default {1 0 0}
		}

        parameter float result {
            display hidden
            access output
        }

		RSLFunction {
		    void vfxdV (
                vector  Input;

                output float    result;
            )
            {
                vector  dV;

                dV = Du(Input) + Dv(Input);

                result = length (dV);
            }
		}
	}

  }
}
